<html>
	<head>
		<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
		<!-- font -->
		<link href="https://fonts.googleapis.com/css?family=Anton|Slabo+27px" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Bungee+Shade" rel="stylesheet">
		<link href="http://fonts.googleapis.com/css?family=Montserrat:300,400,700" rel="stylesheet">

		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.2/css/bootstrap-select.min.css">

		<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.2/js/bootstrap-select.min.js"></script>
		<script src="../js/jquery-3.1.1.min.js"></script>
		<style>
			#bg{
				height:600px;
				width:100%;
				transition: background 1s linear;
			    -moz-transition: background 1s linear; /* Firefox 4 */
			    -webkit-transition: background 1s linear; /* Safari and Chrome */
			    -o-transition: background 1s linear; /* Opera */
			}
			body{
				background-color: #e6e9ef;
			}
			h2{
				margin-top: 50px;
				margin-bottom: 15px;
				font-size: 60px;
				text-align: center;
				font-family: 'Slabo 27px', serif;
				color: #0D3752
			}
			h3{
				font-size: 30px;
				text-align: center;
				font-family: 'Slabo 27px', serif;
				color: #0D3752;
				margin-top:0;
				margin-bottom: 20px
			}
			hr{
				 height:5px;
				 border-radius:5px;
				 color:#0D3752;
				 background-color:#0D3752;
			}
			button{
			    margin-top: 250px;
			    height: 100px;
			    width: 50px;
			    background: aliceblue;
			    border: none;
			    opacity: 0.6;
			    font-size: xx-large;
			}
			button:hover{
				opacity: 0.4;
			}
			table{
				background: #34495E;
				color: #fff;
				border-radius: .4em;
				overflow: hidden;
				font-family: Montserrat, sans-serif;
				text-align: center;
			}
			th{
				text-align: center;
				color: #dd5;
			}
			tr{
				height:50px;
				font-size: 20px;
				border-spacing: 3px;
				opacity: 1;
			}
			tr:hover{
				opacity: 0.9;
			}
			td{
			    border-color: lighten(#34495E, 10%);
			}
			.list-group-item{
				font-size: 20px;
				border:none;
				background:transparent;
			}
			#restaurant{
				display: block;
			}
			#bar{
				display: none;
			}
			#map{
				width: 100%;
				height:500px;
			}
		</style>
	</head>
	<body>
		<% include ../views/layout %>
		<div id="bg" style="background: url(<%= bgImg[0]%>) no-repeat center center;
				background-size: cover;">
		<h1 style="font-size: 70px;font-family: 'Bungee Shade', cursive;
		text-align: center;
		top:320px;
		position:absolute;
		color:white!important;
		width:100%;
		text-shadow: 3px 3px #000000;"><%= key_words%></h1>
		<script type="text/javascript">
			var index = 0;
			prevImg();
			function prevImg(){
				if(index==0){
					index=2;
					document.getElementById('bg').style.background = "url('"+<%- JSON.stringify(bgImg[2])%>+"') no-repeat center center";
					document.getElementById('bg').style.backgroundSize = "cover";
				}
				else if(index==1){
					index--;
					document.getElementById('bg').style.background = "url('"+<%- JSON.stringify(bgImg[0])%>+"') no-repeat center center";
					document.getElementById('bg').style.backgroundSize = "cover";	
				}
				else{
					index--;
					document.getElementById('bg').style.background = "url('"+<%- JSON.stringify(bgImg[1])%>+"') no-repeat center center";
					document.getElementById('bg').style.backgroundSize = "cover";	
				}
				setTimeout(prevImg, 6000);
			}
			function nextImg(){
				if(index==0){
					index++;
					document.getElementById('bg').style.background = "url('"+<%- JSON.stringify(bgImg[1])%>+"') no-repeat center center";
					document.getElementById('bg').style.backgroundSize = "cover";
				}
				else if(index==1){
					index++;
					document.getElementById('bg').style.background = "url('"+<%- JSON.stringify(bgImg[2])%>+"') no-repeat center center";
					document.getElementById('bg').style.backgroundSize = "cover";	
				}
				else{
					index=0;
					document.getElementById('bg').style.background = "url('"+<%- JSON.stringify(bgImg[0])%>+"') no-repeat center center";
					document.getElementById('bg').style.backgroundSize = "cover";
				}
			}
			function r_over(){
				document.getElementById('restaurant').style.display = "block";
				document.getElementById('bar').style.display = "none";
			}
			function b_over(){
				document.getElementById('restaurant').style.display = "none";
				document.getElementById('bar').style.display = "block";
			}
			</script>
		<button id="left" style="float: left;" onclick="prevImg()">&#10094;</button>
		<button id="right" style="float: right;" onclick="nextImg()">&#10095;</button>
		</div>
		<div class="container" style="margin-bottom: 100px">
			<h2>Basic Information</h2>
			<hr/>
			<p style="font-size: 24px;font-family:'Slabo 27px', serif;color: #0D3752"><%= description%></p>
			<h2>Weather</h2>
			<hr/>
			<table style="width:100%;border-collapse: initial;margin-bottom:150px" align="center">
				<colgroup span="2"></colgroup>
				<col>
				<col>
				<col>
				<tr>
					<th colspan="2" scope="rowgroup"">Date</th>
					<th scope="col">Description</th>
					<th scope="col">Temperature</th>
					<th scope="col">Wind</th>
				</tr>
				<% for(var i = 0;i<5;i++){%>
					<tr>
						<td><%= time[i]%></td>
						<td><img src="<%= weather_code[i]%>" style="width:50px"></td>
						<td><%= weather[i]%></td>
						<td><%= min_temperature[i]%>~<%= max_temperature[i]%></td>
						<td><%= wind[i]%></td>
					</tr>
				<% } %>
			</table>
			<h2>Attraction</h2>
			<hr/>
			<h3 style="float: left;left:300px;position: relative;" onmouseover="r_over()">Restaurant</h3>
			<h3 style="float: right;right:300px;position: relative;"" onmouseover="b_over()">Bar</h3>
			<table style="width:100%;border-collapse: initial;margin-bottom:150px" align="center" id="restaurant">
			<% for(var i = 0;i<5;i++){%>
				<tr style="height:120px">
					<td style="width:10%"><%= i+1%></td>
					<td style="width:15%"><img src="<%= restaurant_url[i]%>" style="border-radius: 5px"></td>
					<td style="width:30%"><%= restaurant_name[i]%></td>
					<td style="width:10%"><img src="<%= restaurant_rating[i]%>""></td>
					<td><%= restaurant_address[i]%></td>
				</tr>
			<% } %>
			</table>
			<table style="width:100%;border-collapse: initial;margin-bottom:150px" align="center" id="bar">
			<% for(var i = 0;i<5;i++){%>
				<tr style="height:120px">
					<td style="width:10%"><%= i+1%></td>
					<td style="width:15%"><img src="<%= bar_url[i]%>" style="height:100px;border-radius: 5px"></td>
					<td style="width:30%"><%= bar_name[i]%></td>
					<td style="width:10%"><img src="<%= bar_rating[i]%>""></td>
					<td><%= bar_address[i]%></td>
				</tr>
			<% } %>
			</table>
			<h2>Map</h2>
			<hr/>
			<div id="map">
			<script>
				function initMap() {
					var bounds = new google.maps.LatLngBounds();  
				    var myLatLng = {lat: 37.09024, lng: -95.712891};
				    var customMapType = new google.maps.StyledMapType([
					{
						stylers: [
						  {hue: '#4A9797'},
						  {gamma: 0.5},
						  {weight: 0.5}
						]
					},
				      {
				        featureType: 'water',
				        stylers: [{color: '#0D3752'}]
				      }
				    ], {
				      name: 'Custom Style'
					});
					var customMapTypeId = 'custom_style';
					var map = new google.maps.Map(document.getElementById('map'), {
						center: myLatLng,
						scrollwheel: true,
						zoom: 4,
						mapTypeControlOptions: {
						  mapTypeIds: [google.maps.MapTypeId.ROADMAP, customMapTypeId]
						}
					});
				  	var infowindow = new google.maps.InfoWindow();
				  	var latitude;
					latitude = <%- JSON.stringify(lat)%>;
					var longitude;
					longitude = <%- JSON.stringify(lon)%>;
				  	var pos = {lat:parseFloat(latitude),lng:parseFloat(longitude)};
				  	marker = new google.maps.Marker({
				        map:map,
				        position:pos,
				        icon:"http://maps.google.com/mapfiles/ms/icons/red-dot.png"
				    });
				    bounds.extend(pos);
				    if (navigator.geolocation) {
					    navigator.geolocation.getCurrentPosition(function(position) {
					      var user = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
					      map.setCenter(pos);
					      marker_current = new google.maps.Marker({
					        map:map,
					        position:user,
					        icon:"http://maps.google.com/mapfiles/ms/icons/green-dot.png"
					      });
					      bounds.extend(user);
					  	},function() {
					      window.alert("Unable to get your current Location!");
					    });
					  }
				 	else {
					    // Browser doesn't support Geolocation
					    window.alert("Unable to get your current Location! Please turn the function on or try other function.");
					}
					map.mapTypes.set(customMapTypeId, customMapType);
					map.setMapTypeId(customMapTypeId);
					google.maps.event.addListenerOnce(map, 'idle', function() {
				        map.fitBounds(bounds);
					});
				}
				</script>
				<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA7fykw9VXKzdINOG_he5NmWMu6ArIgXuE&callback=initMap&libraries=geometry"
		  async defer></script>
			</div>
		</div>
	</body>
</html>